{"title":"软件定义网络","date":"2019-06-25T14:49:24.000Z","date_formatted":{"ll":"2019年6月25日","L":"2019/06/25","MM-DD":"06-25"},"link":"2019/06/25/25. 软件定义网络","tags":["网络协议"],"categories":["网络协议"],"updated":"2019-12-01T14:57:23.298Z","content":"<!-- build time:Sun Aug 23 2020 20:59:40 GMT+0800 (GMT+08:00) --><h2 id=\"软件定义网络-（SDN）\">软件定义网络 （SDN）<a href=\"2019/06/25/25. 软件定义网络#软件定义网络-（SDN）\"></a></h2><p><img src=\"https://static001.geekbang.org/resource/image/34/f9/346fe3b3dbe1024e7119ec4ffa9377f9.jpg\" alt=\"img\" class=\"article-img\"></p><p>SDN 主要特点</p><ul><li>控制与转发分离</li><li>控制平面与转发平面之间的开放接口</li><li>逻辑上的集中控制</li></ul><h2 id=\"OpenFlow-和-OpenSwitch\">OpenFlow 和 OpenSwitch<a href=\"2019/06/25/25. 软件定义网络#OpenFlow-和-OpenSwitch\"></a></h2><p>OpenFlow 是 SDN 控制器和网络设备之间互通的南向接口协议，OpenvSwitch 用于创建软件的虚拟交换机。OpenvSwitch 是支持 OpenFlow 协议的，当然也有一些硬件交换机也支持 OpenFlow 协议。它们都可以被统一的 SDN 控制器管理，从而实现物理机和虚拟机的网络连通。</p><p><img src=\"https://static001.geekbang.org/resource/image/38/d0/383710afd8e2b7e99ba8ccfef69c02d0.jpg\" alt=\"img\" class=\"article-img\"></p><p><img src=\"https://static001.geekbang.org/resource/image/ed/f7/ed8939e33728c6118db3c0283b1dbdf7.jpg\" alt=\"img\" class=\"article-img\"></p><p>在 OpenvSwitch 里面，有一个流表规则，任何通过这个交换机的包，都会经过这些规则进行处理，从而接收、转发、放弃。</p><p><img src=\"https://static001.geekbang.org/resource/image/91/77/91a7f011885ec48ca57d61940b748477.jpg\" alt=\"img\" class=\"article-img\"></p><p>通过这些表格，可以对收到的网络包随意处理。</p><p><img src=\"https://static001.geekbang.org/resource/image/34/22/342ac21bda24e20d8d78f47ca8415a22.jpg\" alt=\"img\" class=\"article-img\"></p><p>总而言之，对于 OpenvSwitch 来讲，网络包到了我手里，就是一个 Buffer，我想怎么改怎么改，想发到哪个端口就发送到哪个端口。</p><h2 id=\"实验\">实验<a href=\"2019/06/25/25. 软件定义网络#实验\"></a></h2><ul><li>实验一：用 OpenvSwitch 实现 VLAN 的功能</li></ul><p><img src=\"https://static001.geekbang.org/resource/image/6e/b4/6e1ddc1eb92c85cda32f40b62dd9fcb4.jpg\" alt=\"img\" class=\"article-img\"></p><ul><li><p>实验二：用 OpenvSwitch 模拟网卡绑定，连接交换机</p><p>在 OpenvSwitch 里面，有个 bond_mode，可以设置为以下三个值：</p><p>active-backup：一个连接是 active，其他的是 backup，当 active 失效的时候，backup 顶上；</p><p>balance-slb：流量安装源 MAC 和 output VLAN 进行负载均衡；</p><p>balance-tcp：必须在支持 LACP 协议的情况下才可以，可根据 L2, L3, L4 进行负载均衡。</p></li></ul><p><img src=\"https://static001.geekbang.org/resource/image/8a/6c/8a1956cb5bbf03de7d6cbaa2e706046c.jpg\" alt=\"img\" class=\"article-img\"></p><h2 id=\"OpenSwitch-架构图\">OpenSwitch 架构图<a href=\"2019/06/25/25. 软件定义网络#OpenSwitch-架构图\"></a></h2><p><img src=\"https://static001.geekbang.org/resource/image/d8/14/d870e5bfcad8ec45d146c3226cdccb14.jpg\" alt=\"img\" class=\"article-img\"></p><p><img src=\"https://static001.geekbang.org/resource/image/27/a8/274442ba251fdc63c88bc5dbfc6183a8.jpg\" alt=\"img\" class=\"article-img\"></p><h2 id=\"如何在云计算中使用-OpenSwitch\">如何在云计算中使用 OpenSwitch<a href=\"2019/06/25/25. 软件定义网络#如何在云计算中使用-OpenSwitch\"></a></h2><p><img src=\"https://static001.geekbang.org/resource/image/24/59/24b09861632f7ba7211073e2829d4f59.jpg\" alt=\"img\" class=\"article-img\"></p><h2 id=\"小结\">小结<a href=\"2019/06/25/25. 软件定义网络#小结\"></a></h2><ul><li>用 SDN 控制整个云里面的网络，就像小区保安从总控室管理整个物业是一样的，将控制面和数据面进行了分离</li><li>一种开源的虚拟交换机的实现 OpenvSwitch，它能对经过自己的包做任意修改，从而使得云对网络的控制十分灵活</li><li>将 OpenvSwitch 引入了云之后，可以使得配置简单而灵活，并且可以解耦物理网络和虚拟网络</li></ul><h2 id=\"思考\">思考<a href=\"2019/06/25/25. 软件定义网络#思考\"></a></h2><ul><li>在这一节中，提到了通过 VIP 可以通过流表在不同的机器之间实现复杂均衡，你知道怎样才能做到吗？</li><li>虽然 OpenvSwitch 可以解耦物理网络和虚拟网络，但是在物理网络里面使用 VLAN，数目还是不够，你知道该怎么办吗？</li></ul><!-- rebuild by neat -->","prev":{"title":"云中的网络Qos","link":"2019/06/25/27. 云中的网络QoS"},"next":{"title":"移动网络","link":"2019/06/25/23. 移动网络"},"plink":"https://www.jayli.cn/2019/06/25/25. 软件定义网络/","toc":[{"title":"软件定义网络 （SDN）","id":"软件定义网络-（SDN）","index":"1"},{"title":"OpenFlow 和 OpenSwitch","id":"OpenFlow-和-OpenSwitch","index":"2"},{"title":"实验","id":"实验","index":"3"},{"title":"OpenSwitch 架构图","id":"OpenSwitch-架构图","index":"4"},{"title":"如何在云计算中使用 OpenSwitch","id":"如何在云计算中使用-OpenSwitch","index":"5"},{"title":"小结","id":"小结","index":"6"},{"title":"思考","id":"思考","index":"7"}],"copyright":{"link":"<a href=\"https://www.jayli.cn/2019/06/25/25. 软件定义网络/\" title=\"软件定义网络\">https://www.jayli.cn/2019/06/25/25. 软件定义网络/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","published":"2019年6月25日","author":"Jayli"}}