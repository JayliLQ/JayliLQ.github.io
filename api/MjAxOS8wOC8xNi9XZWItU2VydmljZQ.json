{"title":"Web Service","date":"2019-08-16T15:12:52.000Z","date_formatted":{"ll":"2019年8月16日","L":"2019/08/16","MM-DD":"08-16"},"link":"2019/08/16/Web-Service","tags":["Java"],"categories":["Java"],"updated":"2019-12-01T15:14:31.597Z","content":"<!-- build time:Mon Dec 02 2019 23:46:56 GMT+0800 (GMT+08:00) --><p>Web Service 总结<br><a id=\"more\"></a></p><ul><li>WSDL（网络服务描述语言，Web Services Description Language）</li></ul><p>WSDL 文档主要结构</p><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;definitions&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;types&gt;</span><br><span class=\"line\">  data type definitions........</span><br><span class=\"line\">&lt;/types&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;message&gt;</span><br><span class=\"line\">  <span class=\"keyword\">definition</span> <span class=\"keyword\">of</span> the data being communicated....</span><br><span class=\"line\">&lt;/message&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;portType&gt;</span><br><span class=\"line\">  set <span class=\"keyword\">of</span> operations......</span><br><span class=\"line\">&lt;/portType&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;binding&gt;</span><br><span class=\"line\">  protocol and data format specification....</span><br><span class=\"line\">&lt;/binding&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/definitions&gt;</span><br></pre></td></tr></table></div></figure><p>WSDL 样例</p><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">wsdl:definitions</span> <span class=\"attr\">name</span>=<span class=\"string\">\"nmtoken\"</span>? <span class=\"attr\">targetNamespace</span>=<span class=\"string\">\"uri\"</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">import</span> <span class=\"attr\">namespace</span>=<span class=\"string\">\"uri\"</span> <span class=\"attr\">location</span>=<span class=\"string\">\"uri\"</span>/&gt;</span> *</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">wsdl:documentation</span> <span class=\"attr\">....</span> /&gt;</span> ?</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">wsdl:types</span>&gt;</span> ?</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">wsdl:documentation</span> <span class=\"attr\">....</span> /&gt;</span> ?</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">xsd:schema</span> <span class=\"attr\">....</span> /&gt;</span> *</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">wsdl:types</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">wsdl:message</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ncname\"</span>&gt;</span> *</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">wsdl:documentation</span> <span class=\"attr\">....</span> /&gt;</span> ?</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">part</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ncname\"</span> <span class=\"attr\">element</span>=<span class=\"string\">\"qname\"</span>? <span class=\"attr\">type</span>=<span class=\"string\">\"qname\"</span>?/&gt;</span> *</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">wsdl:message</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">wsdl:portType</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ncname\"</span>&gt;</span> *</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">wsdl:documentation</span> <span class=\"attr\">....</span> /&gt;</span> ?</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">wsdl:operation</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ncname\"</span>&gt;</span> *</span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">wsdl:documentation</span> <span class=\"attr\">....</span> /&gt;</span> ?</span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">wsdl:input</span> <span class=\"attr\">message</span>=<span class=\"string\">\"qname\"</span>&gt;</span> ?</span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">wsdl:documentation</span> <span class=\"attr\">....</span> /&gt;</span> ?</span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">wsdl:input</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">wsdl:output</span> <span class=\"attr\">message</span>=<span class=\"string\">\"qname\"</span>&gt;</span> ?</span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">wsdl:documentation</span> <span class=\"attr\">....</span> /&gt;</span> ?</span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">wsdl:output</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">wsdl:fault</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ncname\"</span> <span class=\"attr\">message</span>=<span class=\"string\">\"qname\"</span>&gt;</span> *</span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">wsdl:documentation</span> <span class=\"attr\">....</span> /&gt;</span> ?</span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">wsdl:fault</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">wsdl:operation</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">wsdl:portType</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">wsdl:serviceType</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ncname\"</span>&gt;</span> *</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">wsdl:portType</span> <span class=\"attr\">name</span>=<span class=\"string\">\"qname\"</span>/&gt;</span> +</span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">wsdl:serviceType</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">wsdl:binding</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ncname\"</span> <span class=\"attr\">type</span>=<span class=\"string\">\"qname\"</span>&gt;</span> *</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">wsdl:documentation</span> <span class=\"attr\">....</span> /&gt;</span> ?</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">--</span> <span class=\"attr\">binding</span> <span class=\"attr\">details</span> <span class=\"attr\">--</span>&gt;</span> *</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">wsdl:operation</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ncname\"</span>&gt;</span> *</span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">wsdl:documentation</span> <span class=\"attr\">....</span> /&gt;</span> ?</span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">--</span> <span class=\"attr\">binding</span> <span class=\"attr\">details</span> <span class=\"attr\">--</span>&gt;</span> *</span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">wsdl:input</span>&gt;</span> ?</span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">wsdl:documentation</span> <span class=\"attr\">....</span> /&gt;</span> ?</span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">--</span> <span class=\"attr\">binding</span> <span class=\"attr\">details</span> <span class=\"attr\">--</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">wsdl:input</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">wsdl:output</span>&gt;</span> ?</span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">wsdl:documentation</span> <span class=\"attr\">....</span> /&gt;</span> ?</span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">--</span> <span class=\"attr\">binding</span> <span class=\"attr\">details</span> <span class=\"attr\">--</span>&gt;</span> *</span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">wsdl:output</span>&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">wsdl:fault</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ncname\"</span>&gt;</span> *</span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">wsdl:documentation</span> <span class=\"attr\">....</span> /&gt;</span> ?</span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">--</span> <span class=\"attr\">binding</span> <span class=\"attr\">details</span> <span class=\"attr\">--</span>&gt;</span> *</span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">wsdl:fault</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">wsdl:operation</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">wsdl:binding</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">wsdl:service</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ncname\"</span> <span class=\"attr\">serviceType</span>=<span class=\"string\">\"qname\"</span>&gt;</span> *</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">wsdl:documentation</span> <span class=\"attr\">....</span> /&gt;</span> ?</span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">wsdl:port</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ncname\"</span> <span class=\"attr\">binding</span>=<span class=\"string\">\"qname\"</span>&gt;</span> *</span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">wsdl:documentation</span> <span class=\"attr\">....</span> /&gt;</span> ?</span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">--</span> <span class=\"attr\">address</span> <span class=\"attr\">details</span> <span class=\"attr\">--</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">wsdl:port</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">wsdl:service</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">wsdl:definitions</span>&gt;</span></span><br></pre></td></tr></table></div></figure><ul><li>SOAP</li></ul><p>SOAP 是基于 XML 的简易协议，可使应用程序在 HTTP 之上进行信息交换。<br>或者更简单地说：SOAP 是用于访问网络服务的协议。</p><p>soap 消息基本结构</p><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=\"1.0\"?&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">soap:Envelope</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"attr\">xmlns:soap</span>=<span class=\"string\">\"http://www.w3.org/2001/12/soap-envelope\"</span></span></span><br><span class=\"line\"><span class=\"tag\"><span class=\"attr\">soap:encodingStyle</span>=<span class=\"string\">\"http://www.w3.org/2001/12/soap-encoding\"</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">soap:Header</span>&gt;</span></span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">soap:Header</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">soap:Body</span>&gt;</span></span><br><span class=\"line\">...</span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">soap:Fault</span>&gt;</span></span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">soap:Fault</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">soap:Body</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">soap:Envelope</span>&gt;</span></span><br></pre></td></tr></table></div></figure><p>soap 实例</p><p>soap 请求</p><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">POST</span> <span class=\"string\">/InStock</span> HTTP/1.1</span><br><span class=\"line\"><span class=\"attribute\">Host</span>: www.example.org</span><br><span class=\"line\"><span class=\"attribute\">Content-Type</span>: application/soap+xml; charset=utf-8</span><br><span class=\"line\"><span class=\"attribute\">Content-Length</span>: nnn</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;?xml version=\"1.0\"?&gt;</span><br><span class=\"line\">&lt;soap:Envelope</span><br><span class=\"line\">xmlns:soap=\"http://www.w3.org/2001/12/soap-envelope\"</span><br><span class=\"line\">soap:encodingStyle=\"http://www.w3.org/2001/12/soap-encoding\"&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;soap:Body xmlns:m=\"http://www.example.org/stock\"&gt;</span><br><span class=\"line\">  &lt;m:GetStockPrice&gt;</span><br><span class=\"line\">    &lt;m:StockName&gt;IBM&lt;/m:StockName&gt;</span><br><span class=\"line\">  &lt;/m:GetStockPrice&gt;</span><br><span class=\"line\">&lt;/soap:Body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/soap:Envelope&gt;</span><br></pre></td></tr></table></div></figure><p>soap 响应</p><figure class=\"highlight\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HTTP/1.1 <span class=\"number\">200</span> OK</span><br><span class=\"line\"><span class=\"attribute\">Content-Type</span>: application/soap+xml; charset=utf-8</span><br><span class=\"line\"><span class=\"attribute\">Content-Length</span>: nnn</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;?xml version=\"1.0\"?&gt;</span><br><span class=\"line\">&lt;soap:Envelope</span><br><span class=\"line\">xmlns:soap=\"http://www.w3.org/2001/12/soap-envelope\"</span><br><span class=\"line\">soap:encodingStyle=\"http://www.w3.org/2001/12/soap-encoding\"&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;soap:Body xmlns:m=\"http://www.example.org/stock\"&gt;</span><br><span class=\"line\">  &lt;m:GetStockPriceResponse&gt;</span><br><span class=\"line\">    &lt;m:Price&gt;34.5&lt;/m:Price&gt;</span><br><span class=\"line\">  &lt;/m:GetStockPriceResponse&gt;</span><br><span class=\"line\">&lt;/soap:Body&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;/soap:Envelope&gt;</span><br></pre></td></tr></table></div></figure><ul><li>Web Services</li></ul><p>Web Services 拥有三种基本的元素:SOAP、WSDL 以及 UDDI</p><p>基础的 Web Services 平台是 XML + HTTP。</p><p>HTTP 协议是最常用的因特网协议。</p><p>XML 提供了一种可用于不同的平台和编程语言之间的语言。</p><p>通过使用 Web services，您的应用程序可向全世界发布功能或消息。</p><p>Web services 使用 XML 来编解码数据，并使用 SOAP 借由开放的协议来传输数据。</p><p>通过 Web services，您的会计部门的 Win 2k 服务器可与 IT 供应商的 UNIX 服务器进行连接。</p><p>参考：<a href=\"http://www.runoob.com/webservices/webservices-tutorial.html\" target=\"_blank\" rel=\"noopener\">Web Service 教程</a></p><!-- rebuild by neat -->","prev":{"title":"Spring 获取 bean 的几种方式","link":"2019/08/20/Spring-获取-bean-的几种方式"},"next":{"title":"URL编码","link":"2019/08/15/URL编码"},"plink":"https://www.jayli.cn/2019/08/16/Web-Service/","copyright":{"link":"<a href=\"https://www.jayli.cn/2019/08/16/Web-Service/\" title=\"Web Service\">https://www.jayli.cn/2019/08/16/Web-Service/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","published":"2019年8月16日","author":"Jayli"}}