{"title":"数据库学习","date":"2019-07-01T14:33:47.000Z","date_formatted":{"ll":"2019年7月1日","L":"2019/07/01","MM-DD":"07-01"},"link":"2019/07/01/数据库学习","tags":["Java,数据库"],"categories":["Java"],"updated":"2019-12-01T14:34:46.964Z","content":"<!-- build time:Mon Dec 02 2019 23:46:56 GMT+0800 (GMT+08:00) --><p>数据库基础总结。<br><a id=\"more\"></a></p><p>数据库事务特性 (ACID)</p><ul><li>原子性，atomicity：最小的执行单元，不可再分，要么全部成功，要么全部失败，通过 <code>undo log</code> 来实现</li><li>一致性，consistent：不破坏数据库的约束，不破坏自定义的约束</li><li>隔离性，isolation：各个事务对表的操作相互独立，互不影响</li><li>持久性，durable：commit 后的数据保存到磁盘，不会因为服务重启儿丢失数据，通过 <code>redo log</code> 来实现</li></ul><p>数据库事务隔离级别</p><ul><li>读未提交，read uncommitted：可能出现脏读，未解决任何问题</li><li>读已提交，read committed：解决了脏读问题，可能出现不可重复读</li><li>可重复读，repeatable read：解决了不可重复读问题，可能出现幻读</li><li>串行化，serializable：解决了所有问题</li></ul><p><strong>脏读</strong>：同一个事务中两次读取，读取到另一个事务未提交的数据</p><p><strong>不可重复读</strong>：同一个事务两次读取，两次读取间隔中有另一个事务提交了数据（<code>update/delete</code>），导致前后读取的数据不一致</p><p><strong>幻读</strong>：同一个事务中两次读取，两次读取间隔中有另一个事务插入的数据（<code>insert</code>），导致前后读取的数据不一致</p><p>MySQL 查询语句的执行过程</p><ol><li>客户端连接 MySQL 服务器</li><li>查询缓存</li><li>解析器解析 SQL：词法解析，语法解析，语义分析，预处理器 -&gt; 解析数</li><li>查询优化器</li><li>生成执行计划</li><li>查询执行引擎调用存储引擎的 API 获取到数据</li><li>返回查询结果：缓存结果，返回结果</li><li></li></ol><p><strong>建立索引的原则</strong>：<br>最左匹配原则 &gt; 离散性高原则 &gt; 最少空间原则</p><p>表中有 name 索引，where name like ‘abc%’ 可以用到索引吗？<br>答：不一定，在查询优化阶段会进到数据抽样环节，但是数据抽样的环节判定该列的数据离散性不高也有可能导致不走索引而进行全表扫描。</p><!-- rebuild by neat -->","prev":{"title":"VUE Errors","link":"2019/07/01/VUE-Errors"},"next":{"title":"云中的网络Qos","link":"2019/06/25/27. 云中的网络QoS"},"plink":"https://www.jayli.cn/2019/07/01/数据库学习/","copyright":{"link":"<a href=\"https://www.jayli.cn/2019/07/01/数据库学习/\" title=\"数据库学习\">https://www.jayli.cn/2019/07/01/数据库学习/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\" rel=\\\"external nofollow\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","published":"2019年7月1日","author":"Jayli"}}